var app=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e){var o=function(e,o){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,o||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==t(o)?o:o+""}function o(t,o,n){return(o=e(o))in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}function n(){}function i(t){return t()}function r(){return Object.create(null)}function c(t){t.forEach(i)}function a(t){return"function"==typeof t}function d(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t){t.parentNode&&t.parentNode.removeChild(t)}let l;function u(t){l=t}function p(){if(!l)throw new Error("Function called outside component initialization");return l}function g(t){p().$$.on_mount.push(t)}function k(t){p().$$.on_destroy.push(t)}const m=[],w=[];let f=[];const v=[],h=Promise.resolve();let y=!1;function _(t){f.push(t)}const b=new Set;let S=0;function j(){if(0!==S)return;const t=l;do{try{for(;S<m.length;){const t=m[S];S++,u(t),O(t.$$)}}catch(t){throw m.length=0,S=0,t}for(u(null),m.length=0,S=0;w.length;)w.pop()();for(let t=0;t<f.length;t+=1){const e=f[t];b.has(e)||(b.add(e),e())}f.length=0}while(m.length);for(;v.length;)v.pop()();y=!1,b.clear(),u(t)}function O(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const x=new Set;function I(t,e){const o=t.$$;null!==o.fragment&&(!function(t){const e=[],o=[];f.forEach((n=>-1===t.indexOf(n)?e.push(n):o.push(n))),o.forEach((t=>t())),f=e}(o.after_update),c(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function q(t,e){-1===t.$$.dirty[0]&&(m.push(t),y||(y=!0,h.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function C(t,e,o,d,p,g,k){let m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const w=l;u(t);const f=t.$$={fragment:null,ctx:[],props:g,update:n,not_equal:p,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(w?w.$$.context:[])),callbacks:r(),dirty:m,skip_bound:!1,root:e.target||w.$$.root};k&&k(f.root);let v=!1;if(f.ctx=o?o(t,e.props||{},(function(e,o){const n=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:o;return f.ctx&&p(f.ctx[e],f.ctx[e]=n)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](n),v&&q(t,e)),o})):[],f.update(),v=!0,c(f.before_update),f.fragment=!!d&&d(f.ctx),e.target){if(e.hydrate){const t=(b=e.target,Array.from(b.childNodes));f.fragment&&f.fragment.l(t),t.forEach(s)}else f.fragment&&f.fragment.c();e.intro&&((h=t.$$.fragment)&&h.i&&(x.delete(h),h.i(y))),function(t,e,o,n){const{fragment:r,after_update:d}=t.$$;r&&r.m(e,o),n||_((()=>{const e=t.$$.on_mount.map(i).filter(a);t.$$.on_destroy?t.$$.on_destroy.push(...e):c(e),t.$$.on_mount=[]})),d.forEach(_)}(t,e.target,e.anchor,e.customElement),j()}var h,y,b;u(w)}class E{$destroy(){I(this,1),this.$destroy=n}$on(t,e){if(!a(e))return n;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function P(t,e){document.dispatchEvent(function(t,e){let{bubbles:o=!1,cancelable:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,o,n,e),i}(t,Object.assign({version:"3.59.2"},e),{bubbles:!0}))}class T extends E{constructor(t){if(!t||!t.target&&!t.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}const N=[];let D=function(t){let e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const i=new Set;function r(o){if(d(t,o)&&(t=o,e)){const e=!N.length;for(const e of i)e[1](),N.push(e,t);if(e){for(let t=0;t<N.length;t+=2)N[t][0](N[t+1]);N.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(c){const a=[c,arguments.length>1&&void 0!==arguments[1]?arguments[1]:n];return i.add(a),1===i.size&&(e=o(r)||n),c(t),()=>{i.delete(a),0===i.size&&e&&(e(),e=null)}}}}(!1);function A(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}let L=!1;const U={local:"http://localhost:8080/build/gokwik.js",dev:"https://dev.pdp.gokwik.co/build/gokwik.js",hdev:"https://dev.pdp.gokwik.co/build/gokwik.js",ndev:"https://dev.pdp.gokwik.co/build/gokwik.js",devtwo:"https://devtwo.pdp.gokwik.co/build/gokwik.js",qa:"https://qa.pdp.gokwik.co/build/gokwik.js",qatwo:"https://qatwo.pdp.gokwik.co/build/gokwik.js",sandbox:"https://sandbox.pdp.gokwik.co/build/gokwik.js?build=0.1.0",production:"https://pdp.gokwik.co/build/gokwik.js?build=0.1.0","qa-rto":"https://qa2.pdp.gokwik.co/build/gokwik.js",qaone:"https://qa1.pdp.gokwik.co/build/gokwik.js"},B={local:"http://localhost:8080/integration.js",dev:"https://devhits.gokwik.co/api/v1/events",hdev:"https://devhits.gokwik.co/api/v1/events",ndev:"https://devhits.gokwik.co/api/v1/events",devtwo:"https://devhits.gokwik.co/api/v1/events",qa:"https://qa-hits.gokwik.co/api/v1/events",qatwo:"https://qa-hits.gokwik.co/api/v1/events",sandbox:"https://sandbox-hits.gokwik.co/api/v1/events",production:"https://hits.gokwik.co/api/v1/events","qa-rto":"https://qa-hits.gokwik.co/api/v1/events",qaone:"https://qa-hits.gokwik.co/api/v1/events"};let G=!1;const J=(t,e)=>{window.gokwikSdk.initCheckout(window.merchantInfo),e&&V("gokwik-button-clicked","onGkClick"),e&&V("checkout_event","stabilityEvent",{name:"checkout_button_clicked",type:"event"})},R=t=>{window.gokwikSdk={},window.gokwikSdk.events={},window.gokwikSdk.initCheckout=function(t){window.postMessage(t,window.location.href)},window.gokwikSdk.on=function(t,e){window.gokwikSdk.events[t]=window.gokwikSdk.events[t]||[],window.gokwikSdk.events[t].push(e)},window.gokwikSdk.emit=function(t,e){window.gokwikSdk.events[t]&&window.gokwikSdk.events[t].forEach((function(t){t(e)}))},window.gokwikSdk.hideButton=function(){setInterval((()=>{document.querySelector(".gokwik-container")&&document.querySelectorAll(".gokwik-container").forEach((t=>{t.style.display="none"}))}),1e3)},window.gokwikSdk.init=function(e){if(window.merchantInfo.isNewFlow=!0,e||document.getElementById("gokwikScript")||L){if(e&&e.length)for(var o=0;o<e.length;o++)if(!document.getElementById(e[o].id)){var n=document.createElement("script");n.type="text/javascript",n.src=e[o].src,document.head.appendChild(n),n.id=e[o].id}}else{L=!0;let e=U[t],o=Z("_shopify_y");o||sessionStorage.getItem("user_id")?o||(o=sessionStorage.getItem("user_id")):(o=Math.floor(1e15+9e15*Math.random()).toString(),sessionStorage.setItem("user_id",o)),V("gk_event_new_ui_loaded","development"),H(e)}F()},document.onreadystatechange=function(){"interactive"!==document.readyState&&"complete"!==document.readyState||window.gokwikSdk.init()},document.addEventListener("initGKJS",(function(){window.gokwikSdk.init()})),document.addEventListener("DOMContentLoaded",(function(){try{window.gokwikSdk.init()}catch(t){console.log(t)}})),"complete"===document.readyState&&window.gokwikSdk.init()},H=t=>{var e=document.createElement("script");e.setAttribute("src",t),e.id="gokwikScript",document.head.appendChild(e),document.querySelector(".gokwik-disabled")&&(document.querySelector(".gokwik-disabled").classList.remove("gokwik-disabled"),document.querySelector("#line_r_gokwik").remove())},F=()=>{G||(G=!0,window.addEventListener("gokwikLoaded",(()=>{D.set(!0),gokwikSdk&&gokwikSdk.on("modal_closed",(()=>{var t;window.closeGokwikSideCart&&window.closeGokwikSideCart(),Q(),"custom_channel"===window.merchantInfo.platform&&(window.merchantInfo.platform=null),(null===(t=window)||void 0===t||null===(t=t.merchantInfo)||void 0===t?void 0:t.mmData)&&(window.merchantInfo.mmData=null)}))})))},z=t=>{var e;let o,n,i;n={items:[]},o=t.get("pid").split(" "),i=t.get("cp");let r={};if(o){o.map((t=>{r[t]?r[t]+=1:r[t]=1}));Object.keys(r).map((t=>{n.items.push({id:t,quantity:r[t]})}))}return null!==(e=n.items)&&void 0!==e&&e.length&&(i?tt("discount_code",i,0):tt("discount_code","",-1)),{pageProducts:o,pageItem:n,pageCoupon:i,productUrl:undefined}},K=function(){var t;let e,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],d=arguments.length>8&&void 0!==arguments[8]&&arguments[8];n&&null!==(t=n.items)&&void 0!==t&&t.length?(r.checkoutType="headless",e=JSON.stringify(n)):e=a.length?JSON.stringify({items:a}):window.productFormSelector?JSON.stringify(et(document.querySelector(window.productFormSelector))):JSON.stringify(X()),o&&(e=et(document.querySelector(o)),e=JSON.stringify(e)),e=JSON.parse(e);let s="https://homeutility.roposo.com"===window.location.origin,l=s?"/cart/update.js":"/cart/add.js",u=s?{updates:{[e.id]:e.quantity||1}}:e;Y("POST",l,u,(function(t){200==t?(d?Y("GET","/cart.js","",(function(t,e){if(200===t){var o;let t={};t={cart:JSON.parse(e),discountCode:i,utm_details:Z("gk_utm_source")};let n=document.getElementById("gokwik-iframe");n&&(null===(o=n.contentWindow)||void 0===o||o.postMessage(t,nt(r.environment)))}})):window.kwikCartActive?window.buyNowCheckoutClick():J(0,!1),c.items,localStorage.setItem("gkbuynow","active"),tt("gkbuynow","active",0)):V("gk_event_failure","development",{statusCode:t,url:l})}))},W=function(){let t,e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(o){if(o.properties&&Object.values(o.properties).some((t=>""!==t&&null!=t)))return void Y("POST","/cart/change.js",{id:o.old_key,quantity:0},(function(){Y("POST","/cart/add.js",{id:o.new_key,quantity:o.quantity||1,properties:o.properties},(function(t,e){200==t?Y("GET","/cart.js",{},(function(t,e){if(200==t){var o;let t=document.getElementById("gokwik-iframe");t&&(null===(o=t.contentWindow)||void 0===o||o.postMessage(e,nt(n.environment)))}else V("gk_event_failure","development",{statusCode:t,url:"/cart.js"})})):V("gk_event_failure","development",{statusCode:t,url:"/cart/add.js"})}))}));if(t="/cart/update.js",o.updatedQuantity)e={updates:{[o.new_key]:o.quantity}};else if(Array.isArray(o.productsArray)&&o.productsArray.length>0){e={updates:o.productsArray.reduce(((t,e)=>(t[e.key]=e.quantity,t)),{})}}else e={updates:{[o.old_key]:0,[o.new_key]:o.quantity}};Y("POST",t,e,(function(e,o){if(200==e){var i;let t=document.getElementById("gokwik-iframe");t&&(null===(i=t.contentWindow)||void 0===i||i.postMessage(o,nt(n.environment)))}else V("gk_event_failure","development",{statusCode:e,url:t})}))}},X=()=>{const t=document.querySelector('[action="/cart/add"]'),e=et(t);var o,n;e.id||(e.id=null===(o=document.querySelector('[name="id"]'))||void 0===o?void 0:o.value);e.quantity||(e.quantity=null===(n=document.querySelector('[name="quantity"'))||void 0===n?void 0:n.value);return e.form_type="product",e.utf8="âœ“",e},Q=()=>{let t=JSON.parse(localStorage.getItem("cartItems"))||JSON.parse(Z("cartItems"))||{};if(t&&t.length){let e={items:t};localStorage.removeItem("gkbuynow"),tt("gkbuynow",null,-1),Y("POST","/cart/clear.js","",(function(t){200===t?Y("POST","/cart/add.js",e,(function(t){200==t?(localStorage.removeItem("cartItems"),tt("cartItems",null,-1)):V("gk_event_failure","development",{statusCode:t,url:"/cart/add.js"})})):V("gk_event_failure","development",{statusCode:t,url:"/cart/clear.js"})}))}else"active"!==localStorage.getItem("gkbuynow")&&"active"!==Z("gkbuynow")||Y("POST","/cart/clear.js","",(()=>{localStorage.removeItem("gkbuynow"),tt("gkbuynow",null,-1)}))},V=function(t,e){var o;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=B[window.merchantInfo.environment],r=Date.now(),c=navigator.userAgent,a=null===(o=window.merchantInfo)||void 0===o?void 0:o.mid,d=t,s=e,l=Z("_shopify_sa_p"),u=localStorage.getItem("gokwik-sessionID")||Z("gokwik-sessionID"),p=Z("__Host-go_sid")?Z("__Host-go_sid"):Z("_shopify_s"),g=Z("gk_landing_page")||"/",k=Z("gk_orig_referrer")||"blank",m=Z("_shopify_y")||null,w=Z("localization")||null,f=M(M({timestamp:r,userAgent:c,version:"1",merchantId:a,name:d,sessionId:u,type:"event",adSource:l,eventType:s},p&&{shopifySessionId:p}),{},{landing_page:g,orig_referrer:k,sa_shopify_y:m,sa_localization:w,data:n});u||delete f.sessionId,l||delete f.adSource,Y("POST",i,f,((t,e)=>{}))},Y=async(t,e,o,n)=>{var i;if(null===(i=window)||void 0===i||null===(i=i.merchantInfo)||void 0===i||!i.modeMagicEnabled||"/cart/add.js"!==e&&"/cart/clear.js"!==e||(e+="?mm=false"),"https://foxtale.in"===window.location.origin&&"/cart/add.js"===e){var r={url:"https://foxtale.in/cart/add.js?_easygift_internal=true",method:"POST","content-type":"application/json",data:o};$.ajax(r).done((function(t,e,o){n(o.status,t)})).fail((function(t,e,o){console.error("Request failed:",e,o)}))}else{let i=(new Date).valueOf(),r=new XMLHttpRequest;r.open(t,e,!0),r.setRequestHeader("Content-type","application/json"),r.onload=function(){let c=r.status,a=r.response,d=(new Date).valueOf();!o.name&&V("gk_execution_time","development",{executionBegan:i,url:e,method:t,executionEnd:d,data:o,response:a,status:c,timeTaken:d-i}),n(c,a)},r.onerror=function(){let t=r.status,n=r.response;"gk_event_failure"!==o.name&&V("gk_event_failure","development",{status:t,response:n,url:e})};let c=o?JSON.stringify(o):null;null!=o&&o["properties[_ftmx]"]&&(c=o),r.send(c)}},Z=t=>{const e=document.cookie.split(";");for(const o of e){const[e,n]=o.trim().split("=");if(e===t)return decodeURIComponent(n)}return null},tt=(t,e,o)=>{let n="";if(o){let t=new Date;t.setTime(t.getTime()+24*o*60*60*1e3),n="; expires="+t.toUTCString()}document.cookie=t+"="+(e||"")+n+"; path=/"},et=t=>{let e={},o=t.querySelectorAll("input, select, textarea");for(let t=0;t<o.length;++t){let n=o[t],i=n.name,r=n.value;i&&(e[i]=r)}return e};function ot(t){const e={utm_source:["utm_source","gad_source","fbad_source"],utm_campaign:["utm_campaign","gad_campaignid","utm_campaignid"],utm_medium:["utm_medium","gad_medium","fbad_medium"],utm_content:["utm_content","gad_content","fbad_content"],utm_term:["utm_term","gad_term","fbad_term"]},o=new URL(t).searchParams,n=[];for(const[i,r]of Object.entries(e))for(const e of r){let r=o.get(e);if(null!==r){"utm_source"!==i||t.includes("utm_source")||(t.includes("gclid")||t.includes("gad_source")?r="google":t.includes("fbclid")?r="facebook":t.includes("msclkid")?r="bing":t.includes("li_fat_id")?r="linkedin":(t.includes("tclid")||t.includes("twclid"))&&(r="twitter")),n.push("".concat(i,"=").concat(r));break}}return n.join("&")}function nt(t){return"local"===t?"http://localhost:8080":"dev"===t||"hdev"===t||"ndev"===t?"https://dev.pdp.gokwik.co":"devtwo"===t?"https://devtwo.pdp.gokwik.co":"production"===t||"pci-prod"===t?"https://pdp.gokwik.co":"sandbox"===t?"https://sandbox.pdp.gokwik.co":"qa-rto"===t?"https://qa2.pdp.gokwik.co":"qaone"===t?"https://qa1.pdp.gokwik.co":"qatwo"===t||"idev"===t?"https://qatwo.pdp.gokwik.co":"qa"===t&&"https://qa.pdp.gokwik.co"}const it=()=>{window.addEventListener("message",(async t=>{try{var e;if(!t.data)return;const i=null===(e=t.data)||void 0===e||null===(e=e.messageAuth)||void 0===e?void 0:e.app;if("mode_magic"===(null==i?void 0:i.toLowerCase().trim())){var o,n;console.log("mode magic callback received",t.data);const e=t.data;null===(o=t.data)||void 0===o||null===(o=o.messageData)||void 0===o||null===(o=o.payload)||void 0===o||null===(o=o.cart)||void 0===o||null===(o=o.discounts[0])||void 0===o||o.amount;let i=null===(n=t.data)||void 0===n||null===(n=n.messageData)||void 0===n||null===(n=n.payload)||void 0===n||null===(n=n.cart)||void 0===n?void 0:n.items;i=i.map((t=>{let e={};return t.properties.length&&t.properties.forEach((t=>{e[t.name]=t.value})),{id:t.id,quantity:t.quantity,properties:e}}));const r=i.map((t=>{let{id:e,quantity:o,properties:n}=t;return{id:e,quantity:o,properties:n}}));window.merchantInfo.mmData=e,window.onBuyNowClick(t,!1,r)}}catch(t){console.log(t)}}))},rt="__Host-go_sid";let ct=null;function at(){const t=document.cookie.split(";");let e={};t.forEach((t=>{let[o,n]=t.split("=");o&&n&&(e[o.trim()]=n)}));let o=e[rt];o?function(t){if(document.cookie.split(";").some((t=>{var e;return null==t||null===(e=t.trim())||void 0===e?void 0:e.startsWith("kp-login-no=")})))return;let e=null;if("string"==typeof t&&t)e=t;else{document.cookie.split(";").forEach((t=>{let[o,n]=t.split("=");o&&o.trim()===rt&&n&&(e=n)}))}if(e){const o=Date.now(),n=30;ct||(ct=o+60*n*1e3);if(ct-o<=12e4){ct=o+60*n*1e3;const i=new Date(ct),r="".concat(rt,"=").concat(e,"; path=/; expires=").concat(i.toUTCString(),"; SameSite=None; Secure");document.cookie=r,V("gokwik_session_extended","development",{cachedValue:t})}}}(o):e._shopify_s||(o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})),function(t,e){const o=new Date,n=new Date(o).setHours(24,0,0,0)-o.getTime(),i=18e5,r=Math.min(i,n),c=new Date(o.getTime()+r),a="".concat(t,"=").concat(encodeURIComponent(e),"; path=/; expires=").concat(c.toUTCString(),"; SameSite=None; Secure");document.cookie=a,V("gokwik_session_set","development",{name:t,value:e})}(rt,o))}function dt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lt(t){const e={c:n,l:function(t){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:n,p:n,i:n,o:n,d:n};return P("SvelteRegisterBlock",{block:e,id:lt.name,type:"component",source:"",ctx:t}),e}function ut(t,e,o){let n,i,r,c,{$$slots:a={},$$scope:d}=e;!function(t,e,o){for(const n of Object.keys(e))~o.indexOf(n)||console.warn("<".concat(t,'> received an unexpected slot "').concat(n,'".'))}("Main",a,[]);const s=window.merchantInfo;g((()=>{V("gokwik_integration_v2","development"),R(s.environment);const t=new URLSearchParams(window.location.search);at(),window.addEventListener("message",(t=>{var e,o;if("CHECKOUT_LINK_RESPONSE"===(null===(e=t.data)||void 0===e?void 0:e.type)){const e=t.data.data;i={items:((null==e?void 0:e.products)||[]).map((t=>st(st({},t),{},{id:t.variant_id})))},n=(null==e?void 0:e.products)||[],c=null,Array.isArray(null==e?void 0:e.discount_codes)&&e.discount_codes.length>0&&(r=e.discount_codes[0]);const o=null==e?void 0:e.utm_details;if(o&&"object"==typeof o){const t=["utm_source","utm_campaign","utm_medium","utm_content","utm_term"],e=[];for(const n of t)o[n]&&e.push("".concat(n,"=").concat(o[n]));if(e.length){const t=e.join("&");tt("gk_utm_source",encodeURIComponent(t),1)}}l(!1,[],!0)}if("updateCartItems"===(null===(o=t.data)||void 0===o?void 0:o.type)){let e=t.data.data;W(e,s)}})),t.get("pid")&&(({pageProducts:n,pageItem:i,pageCoupon:r,productUrl:c}=z(t)),D.subscribe((e=>{if(e&&i.items.length){t.get("custom_source")&&(window.merchantInfo.source="custom_channel"),l(!1)}}))),!Z("gk_landing_page")&&tt("gk_landing_page","".concat(window.location.pathname),10),!Z("gk_orig_referrer")&&tt("gk_orig_referrer",document.referrer,10);const e=ot(window.location.href);window.onload=()=>{setTimeout((()=>{!Z("_fbc")&&t.get("fbclid")&&tt("_fbc",t.get("fbclid"),.0208)}),1e3)},e&&tt("gk_utm_source",encodeURIComponent(e),1),it()}));const l=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Y("GET","/cart.js","",(function(a,d){var l=JSON.parse(d);if(200===a&&l.item_count){var u=l.items.map((t=>({id:t.id,quantity:t.quantity,options_with_values:t.options_with_values,properties:(null==t?void 0:t.properties)||{}})));localStorage.setItem("cartItems",JSON.stringify(u)),tt("cartItems",JSON.stringify(u),0),Y("POST","/cart/clear.js","",(function(a){200===a&&K(t,n,i,r,c,s,l,e,o)}))}else K(t,n,i,r,c,s,l,e,o)}))};window.onCheckoutClick=t=>{try{V("gokwik_sdk_loaded","development",{sdk:!!window.gokwikSdk,script_tag:!!document.getElementById("gokwikScript")});const e=t.lastElementChild;e.setAttribute("id","btn-loader"),t.disabled=!0,t.style.cursor="not-allowed",J(window.merchantInfo,!0),e.style.display="flex",setTimeout((()=>{e.style.display="none",t.disabled=!1,t.style.cursor="pointer",e.removeAttribute("id")}),3e3)}catch(t){V("gk_event_failure","development",{error:t,action:"checkout_clicked"})}},window.gokwikCheckoutClickFn=t=>{try{V("gokwik_sdk_loaded","development",{sdk:!!window.gokwikSdk});const e=t.lastElementChild;e.setAttribute("id","btn-loader"),t.disabled=!0,t.style.cursor="not-allowed",J(window.merchantInfo,!0),e.style.display="flex",setTimeout((()=>{e.style.display="none",t.disabled=!1,t.style.cursor="pointer",e.removeAttribute("id")}),3e3)}catch(t){V("gk_event_failure","development",{error:t,action:"checkout_clicked"})}},window.gokwikBuyNowClickFn=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];try{V("gokwik_sdk_loaded","development",{sdk:!!window.gokwikSdk}),V("gk_buy_now_button_clicked","onGkClick"),V("checkout_event","stabilityEvent",{name:"checkout_buy_now_button_clicked",type:"event"});const n=t.children[0];n.setAttribute("id","btn-loader"),t.disabled=!0,t.style.cursor="not-allowed",window.gokwikSdk.triggerLoadingScreen(),l(e,o),n.style.display="flex",setTimeout((()=>{n.style.display="none",t.disabled=!1,t.style.cursor="pointer",n.removeAttribute("id")}),3e3)}catch(t){window.gokwikSdk.triggerLoadingScreen(),l(e,o),V("gk_event_failure","development",{error:t,action:"buy_now_clicked"})}},window.onBuyNowClick=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];try{V("gokwik_sdk_loaded","development",{sdk:!!window.gokwikSdk}),V("gk_buy_now_button_clicked","onGkClick"),V("checkout_event","stabilityEvent",{name:"checkout_buy_now_button_clicked",type:"event"});const n=t.children[0];n.setAttribute("id","btn-loader"),t.disabled=!0,t.style.cursor="not-allowed",window.gokwikSdk.triggerLoadingScreen(),l(e,o),n.style.display="flex",setTimeout((()=>{n.style.display="none",t.disabled=!1,t.style.cursor="pointer",n.removeAttribute("id")}),3e3)}catch(t){window.gokwikSdk.triggerLoadingScreen(),l(e,o),V("gk_event_failure","development",{error:t,action:"buy_now_clicked"})}},window.triggerGokwikCustomCheckout=function(){J(window.merchantInfo,!0)};const u=[];return Object.keys(e).forEach((t=>{~u.indexOf(t)||"$$"===t.slice(0,2)||"slot"===t||console.warn("<Main> was created with unknown prop '".concat(t,"'"))})),t.$capture_state=()=>({onDestroy:k,onMount:g,addCartBuyNow:K,createIntegrationScript:R,extractUTMParams:ot,getGokwikCookie:Z,getHeadlessParams:z,initiateGokwik:J,logEvent:V,makeXhr:Y,setGokwikCookie:tt,updateCart:W,store_gokwikLoaded:D,fetchModeMagicDetails:it,getOrSetGoKwikSessionId:at,pageProducts:n,pageItem:i,pageCoupon:r,productUrl:c,merchantInfo:s,gokwikBuyNow:l}),t.$inject_state=t=>{"pageProducts"in t&&(n=t.pageProducts),"pageItem"in t&&(i=t.pageItem),"pageCoupon"in t&&(r=t.pageCoupon),"productUrl"in t&&(c=t.productUrl)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[]}return new class extends T{constructor(t){super(t),C(this,t,ut,lt,d,{}),P("SvelteRegisterComponent",{component:this,tagName:"Main",options:t,id:lt.name})}}({target:window.parent})}();
